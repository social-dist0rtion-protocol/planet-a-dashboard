(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(50),l=a.n(c),s=(a(62),a(9)),i=a.n(s),u=a(16),m=a(1),b=a(173),d=a(170),f=a(171),p=a(172),g=(a(64),a(51)),E=a.n(g),h=a(52),v=h,C={Accept:"application/json","Content-Type":"application/json"},O=function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(200!==(a=e.sent).status){e.next=8;break}return e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:return e.abrupt("return",void 0);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(function(){return e="/stats".concat(n?"?from=".concat(n):""),fetch("".concat("https://planet-a-backend.before.coffee").concat(e),{method:"GET",headers:C});var e});case 2:return(t=e.sent)&&(n=t.lastUpdate),e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j={name:"Mr. Mysterious",event:"???"},x=function(e){var t=e.player,a=e.balance;return o.a.createElement(d.a,{noGutters:!0},o.a.createElement(f.a,{xs:10,className:"player-name"},o.a.createElement(p.a,{pill:!0,style:{backgroundColor:(v[t.countryId]||{color:"white"}).color,color:(v[t.countryId]||{textColor:"#333333"}).textColor}},(v[t.countryId]||{event:"ext"}).event)," ",t.name||"Mr. Anonymous"),o.a.createElement(f.a,null,E()(a).format("0a")))},w=o.a.memo(function(e){return o.a.createElement("div",{className:"leaderboard"},o.a.createElement("h4",null,"Best planters - CO\u2082 locked"),o.a.createElement(d.a,{className:"tree-huggers",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(d.a,{className:"headers",noGutters:!0},o.a.createElement(f.a,{xs:10},"name"),o.a.createElement(f.a,null,"CO\u2082 (Mt)")),e.trees.slice(0,10).map(function(t){return o.a.createElement(x,{key:t[0],player:e.players[t[0]]||j,balance:parseInt(t[1],10)})}))),o.a.createElement("h4",null,"Biggest polluters - CO\u2082 emitted"),o.a.createElement(d.a,{className:"polluters",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(d.a,{className:"headers",noGutters:!0},o.a.createElement(f.a,{xs:10},"name"),o.a.createElement(f.a,null,"CO\u2082 (Mt)")),e.emissions.slice(0,10).map(function(t){return o.a.createElement(x,{key:t[0],player:e.players[t[0]]||j,balance:parseInt(t[1],10)})}))))}),k=a(56),N=a(12),S=(a(160),a(161),a(55)),A=N.c.global;A.elements.point.backgroundColor="rgba(255, 255, 255, 0.8)",A.elements.point.borderColor="rgba(255, 255, 255, 0.8)",A.elements.line.borderColor="rgba(255, 255, 255, 0.8)",A.elements.line.borderColor="rgba(255, 255, 255, 0.8)",A.legend.labels.fontColor="rgba(255, 255, 255, 0.8)";var I=Object.values(v).reduce(function(e,t){return e[t.id]=t.pattern?Object(S.draw)(t.pattern,t.color):t.color,e},{}),L=o.a.memo(function(e){var t=Object.keys(v),a=Object(r.useState)([]),n=Object(m.a)(a,2),c=n[0],l=n[1],s=Object(r.useState)({}),i=Object(m.a)(s,2),u=i[0],b=i[1],p=Object(r.useState)(0),g=Object(m.a)(p,2),E=g[0],h=g[1];return Object(r.useEffect)(function(){var a=e.netCO2History,n={};Object.entries(a).forEach(function(e){var t=Object(m.a)(e,2),a=t[0];t[1].forEach(function(e){var t=n[e[1]]||{};t[a]=parseInt(e[0],10),n[e[1]]=t})});var r=Object.keys(n).sort(),o=Object(k.a)(c),s=t.reduce(function(e,t){return e[t]=u[t]||[],e},{});r.forEach(function(e){o.push(new Date(1e3*parseInt(e,10))),t.forEach(function(t){var a=s[t],r=n[e][t];if(!r){var o=(a.length&&a||[0]).slice(-1);r=Object(m.a)(o,1)[0]}a.push(r)})});var i=Object.values(s).reduce(function(e,t){var a=t.slice(-1);return e+Object(m.a)(a,1)[0]},0);l(o),b(s),h(i)},[e.netCO2History]),o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",null,"Global emissions"),o.a.createElement(d.a,{className:"global-stats",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(d.a,null,o.a.createElement(f.a,null,o.a.createElement(N.b,{data:{labels:c,datasets:Object.entries(u).map(function(e){var t=Object(m.a)(e,2),a=t[0],n=t[1];return{label:v[a].name,data:n,pointBorderWidth:0,backgroundColor:I[a]}})},options:{animation:{duration:0},showLine:!0,spanGaps:!0,scales:{xAxes:[{id:"time-axis",type:"time",display:!0,gridLines:{display:!1,color:"rgba(255, 255, 255, 0.6)"},ticks:{source:"auto",beginAtZero:!1,autoSkip:!0,fontColor:"rgba(255, 255, 255, 0.8)"},scaleLabel:"rgba(255, 255, 255, 0.8)",time:{unit:"second",round:"second"}}],yAxes:[{id:"value-axis",type:"linear",scaleLabel:"rgba(255, 255, 255, 0.8)",stacked:!0,gridLines:{color:"rgba(255, 255, 255, 0.2)"},ticks:{suggestedMax:13e5,suggestedMin:0,beginAtZero:!0,fontColor:"rgba(255, 255, 255, 0.8)"}}]},annotation:{drawTime:"afterDraw",annotations:[{type:"line",mode:"horizontal",scaleID:"value-axis",value:42e4,borderColor:"rgba(253, 106, 2, 0.3)",borderWidth:2,label:{content:"+1.5\xb0C",enabled:!0,backgroundColor:"rgba(253, 106, 2, 0.7)"}},{type:"line",mode:"horizontal",scaleID:"value-axis",value:117e4,borderColor:"red",borderWidth:1,label:{content:"+2\xb0C",enabled:!0,backgroundColor:"rgba(255, 0, 0, 0.7)"}}]}},width:300,height:400,redraw:!0}))),o.a.createElement(d.a,{className:"current"},o.a.createElement(f.a,null,"Current CO\u2082 levels: ",o.a.createElement("span",{className:"bold"},E||0)," ","Mt")))))}),B=(a(167),o.a.memo(function(e){var t=e.countries,a=e.co2ByCountry,n=e.treesByCountry,r=[],c=[],l=[];return Object.entries(t).forEach(function(e){var t=Object(m.a)(e,2),o=t[0],s=t[1];r.push(s.shortName),c.push(parseInt(a[o]||"0",10)),l.push(parseInt(n[o]||"0",10))}),o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",null,"CO\u2082 emitted"),o.a.createElement(d.a,{className:"sustainability",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(N.a,{data:{labels:r,datasets:[{label:"CO\u2082",data:c,backgroundColor:"rgba(200, 200, 200, 0.6)"}]},options:{animation:{duration:0},scales:{xAxes:[{barPercentage:.5,scaleLabel:"rgba(255, 255, 255, 0.8)",gridLines:{color:"rgba(255, 255, 255, 0.4)"},ticks:{fontSize:16,fontColor:"rgba(255, 255, 255, 0.8)"}}],yAxes:[{scaleLabel:"rgba(255, 255, 255, 0.8)",gridLines:{color:"rgba(255, 255, 255, 0.2)"},ticks:{suggestedMin:0,fontColor:"rgba(255, 255, 255, 0.8)"}}]}},width:200,height:120,redraw:!0}))),o.a.createElement("h4",null,"Trees planted"),o.a.createElement(d.a,{className:"trees",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(N.a,{data:{labels:r,datasets:[{label:"trees",data:l,backgroundColor:"rgba(80, 200, 120, 0.6)"}]},options:{animation:{duration:0},scales:{xAxes:[{barPercentage:.5,scaleLabel:"rgba(255, 255, 255, 0.8)",gridLines:{color:"rgba(255, 255, 255, 0.4)"},ticks:{fontSize:16,fontColor:"rgba(255, 255, 255, 0.8)"}}],yAxes:[{scaleLabel:"rgba(255, 255, 255, 0.8)",gridLines:{color:"rgba(255, 255, 255, 0.2)"},ticks:{suggestedMin:0,fontColor:"rgba(255, 255, 255, 0.8)"}}]}},width:200,height:120,redraw:!0}))))})),G=(a(168),function(){var e=Object(r.useState)({}),t=Object(m.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)([]),l=Object(m.a)(c,2),s=l[0],p=l[1],g=Object(r.useState)([]),E=Object(m.a)(g,2),h=E[0],C=E[1],O=Object(r.useState)(Object.keys(v).reduce(function(e,t){return e[t]=[],e},{})),j=Object(m.a)(O,2),x=j[0],k=j[1],N=Object(r.useState)({}),S=Object(m.a)(N,2),A=S[0],I=S[1],G=Object(r.useState)({}),M=Object(m.a)(G,2),D=M[0],P=M[1],U=function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:(t=e.sent)&&(n(t.players),p(t.trees),C(t.emissions),k(t.netCO2History),I(t.co2ByCountry),P(t.treesByCountry));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(function(){U()},[]),function(e,t){var a=Object(r.useRef)();Object(r.useEffect)(function(){a.current=e},[e]),Object(r.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}(U,1e4),o.a.createElement(b.a,{className:"app",fluid:!0},o.a.createElement(d.a,null,o.a.createElement(f.a,null,o.a.createElement("h1",null,o.a.createElement("span",{role:"img","aria-label":"globe"},"\ud83c\udf0d")," ","Planet A"," ",o.a.createElement("span",{role:"img","aria-label":"globe"},"\ud83c\udf33")))," "),o.a.createElement(d.a,null,o.a.createElement(f.a,{className:"mainCol"},o.a.createElement(w,{players:a,trees:s,emissions:h})),o.a.createElement(f.a,{className:"mainCol"},o.a.createElement(L,{netCO2History:x})),o.a.createElement(f.a,{className:"mainCol"},o.a.createElement(B,{countries:v,co2ByCountry:A,treesByCountry:D}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},52:function(e){e.exports={49155:{id:"49155",name:"United States of Balloons",shortName:"USB",color:"#ff0000",textColor:"#750000",event:"eth2"},49156:{id:"49156",name:"United States of Ambrosia",shortName:"USA",color:"#ffd200",textColor:"#876224",event:"eth2"},49160:{id:"49160",name:"Pollutistan",shortName:"PLAN",color:"#0000ff",textColor:"#000065",event:"eth2"},49161:{id:"49161",name:"New Smogland",shortName:"SMOG",color:"#9aba00",textColor:"#5b7500",event:"ccc"},49162:{id:"49162",name:"Democratic Repulic of Deforestation",shortName:"DRED",color:"#ffc600",textColor:"#9d6d1d",event:"ccc"},49163:{id:"49163",name:"Cataclysmia",shortName:"CASM",color:"#0176bb",textColor:"#01436c",event:"ccc"}}},57:function(e,t,a){e.exports=a(169)},62:function(e,t,a){},64:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.3ef009c3.chunk.js.map