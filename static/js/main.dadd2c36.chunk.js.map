{"version":3,"sources":["api.ts","components/Leaderboard.tsx","components/GlobalStats.tsx","components/Sustainability.tsx","App.tsx","effects.ts","serviceWorker.ts","index.tsx"],"names":["lastUpdate","unknownPlayer","name","event","Leader","_ref","countries","player","balance","react_default","a","createElement","Row","noGutters","Col","xs","className","OverlayTrigger","key","placement","overlay","Tooltip","id","concat","get","countryId","Badge","pill","style","backgroundColor","color","shortName","toLowerCase","numeral","format","React","memo","props","trees","slice","map","t","Leaderboard_Leader","players","parseInt","emissions","e","countriesById","countryList","defaultHeaders","Accept","Content-Type","fetchJson","Object","asyncToGenerator","regenerator_default","mark","_callee","call","response","json","wrap","_context","prev","next","sent","status","abrupt","undefined","stop","_x","apply","this","arguments","getLeaderboard","_ref2","_callee2","_context2","url","fetch","method","headers","ChartConf","defaults","global","elements","point","borderColor","line","legend","labels","fontColor","countryIds","Array","from","keys","_useState","useState","_useState2","slicedToArray","times","setTimes","_useState3","Map","_useState4","netCO2ByCountry","setNetCO2ByCountry","_useState5","_useState6","totalCO2","setTotalCO2","useEffect","netCO2History","allTimeEntries","entries","forEach","v","values","sortedTimeline","sort","newTimes","reduce","current","getTime","toString","newValues","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","value","set","err","return","newValuesForCountry","newValue","_slice","length","push","co2","_current$slice","Date","Fragment","es","data","datasets","_ref3","i","_ref4","series","label","fill","pointBorderWidth","backgroundColors","options","animation","duration","showLine","spanGaps","scales","xAxes","type","display","gridLines","ticks","source","beginAtZero","autoSkip","scaleLabel","time","unit","round","yAxes","stacked","suggestedMax","suggestedMin","annotation","drawTime","annotations","mode","scaleID","borderWidth","content","enabled","width","height","redraw","goeMillis","co2ByCountry","treesByCountry","c","barPercentage","fontSize","c1","c2","pattern","draw","NoFooter","App","setPlayers","setTrees","setEmissions","_useState7","_useState8","setNetCO2History","_useState9","_useState10","setCO2ByCountry","_useState11","_useState12","setTreesByCountry","_useState13","_useState14","setGoeMillis","lastPolled","useRef","_useState15","STATS","init","_useState16","pullLoadAction","setPullLoadAction","_useState17","_useState18","pollLeaderbord","_ref5","setTime","valueOf","goeMillisCirculating","focusListener","document","visibilityState","POLL_INTERVAL_SECONDS","console","log","addEventListener","removeEventListener","callback","delay","savedCallback","setInterval","clearInterval","useInterval","dist_default","downEnough","action","handleAction","refreshing","refreshed","then","catch","hasMore","FooterNode","Container","fluid","role","aria-label","sm","lg","xl","src_components_Leaderboard","src_components_GlobalStats","src_components_Sustainability","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dadd2c36.chunk.js","sourcesContent":["import { LeaderboardResponse, Country } from \"./types\";\nimport countryList from \"./countries.json\";\n\nconst env = process.env.NODE_ENV || \"development\";\n\nconst backend =\n  env === \"development\"\n    ? \"http://localhost:8080\"\n    : \"https://planet-a-backend.before.coffee\";\n\nlet lastUpdate: number;\n\nexport const countriesById: { [id: string]: Country } = countryList;\n\nconst defaultHeaders = {\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\"\n};\n\nconst get = (url: string) =>\n  fetch(`${backend}${url}`, {\n    method: \"GET\",\n    headers: defaultHeaders\n  });\n\nconst fetchJson = async (call: () => Promise<Response>) => {\n  const response = await call();\n  if (response.status === 200) {\n    const json = await response.json();\n    return json;\n  }\n  return undefined;\n};\n\nexport const getLeaderboard = async () => {\n  const response: LeaderboardResponse | undefined = await fetchJson(() =>\n    get(`/stats${lastUpdate ? `?from=${lastUpdate}` : \"\"}`)\n  );\n  if (response) lastUpdate = response.lastUpdate;\n  return response;\n};\n","import React from \"react\";\nimport { Badge, Col, Row, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport \"./Leaderboard.css\";\nimport { Player, Country } from \"../types\";\nimport numeral from \"numeral\";\n\ntype LeaderboardProps = {\n  countries: Map<string, Country>;\n  players: { [id: string]: Player };\n  trees: Array<[string, string]>;\n  emissions: Array<[string, string]>;\n};\n\nconst unknownPlayer = { name: \"Mr. Mysterious\", event: \"???\" };\n\nconst Leader = ({\n  countries,\n  player,\n  balance\n}: {\n  countries: LeaderboardProps[\"countries\"];\n  player: Player;\n  balance: number;\n}) => (\n  <Row noGutters>\n    <Col xs={10} className=\"player-name\">\n      <OverlayTrigger\n        key={player.name}\n        placement=\"right\"\n        overlay={\n          <Tooltip id={`tt-${player.name}`}>\n            {\n              (countries.get(player.countryId) || { name: \"unknown country\" })\n                .name\n            }\n          </Tooltip>\n        }\n      >\n        <Badge\n          pill\n          style={{\n            backgroundColor: (\n              countries.get(player.countryId) || { color: \"white\" }\n            ).color,\n            color: \"#eee\"\n          }}\n        >\n          {`${(countries.get(player.countryId) || { event: \"ext\" }).event}-${(\n            countries.get(player.countryId) || { shortName: \"xxx\" }\n          ).shortName.toLowerCase()}`}\n        </Badge>\n      </OverlayTrigger>\n      {` ${player.name || \"Mr. Anonymous\"}`}\n    </Col>\n    <Col>{numeral(balance).format(\"0a\")}</Col>\n  </Row>\n);\n\nconst Leaderboard = (props: LeaderboardProps) => (\n  <div className=\"leaderboard\">\n    <h4>Best planters - CO₂ locked</h4>\n    <Row className=\"tree-huggers\" noGutters>\n      <Col>\n        <Row className=\"headers\" noGutters>\n          <Col xs={10}>name</Col>\n          <Col>CO₂ (Mt)</Col>\n        </Row>\n        {props.trees.slice(0, 10).map(t => (\n          <Leader\n            key={t[0]}\n            countries={props.countries}\n            player={props.players[t[0]] || unknownPlayer}\n            balance={parseInt(t[1], 10)}\n          />\n        ))}\n      </Col>\n    </Row>\n    <h4>Biggest polluters - CO₂ emitted</h4>\n    <Row className=\"polluters\" noGutters>\n      <Col>\n        <Row className=\"headers\" noGutters>\n          <Col xs={10}>name</Col>\n          <Col>CO₂ (Mt)</Col>\n        </Row>\n        {props.emissions.slice(0, 10).map(e => (\n          <Leader\n            key={e[0]}\n            countries={props.countries}\n            player={props.players[e[0]] || unknownPlayer}\n            balance={parseInt(e[1], 10)}\n          />\n        ))}\n      </Col>\n    </Row>\n  </div>\n);\n\nexport default React.memo(Leaderboard);\n","import numeral from \"numeral\";\nimport React, { useState, useEffect } from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\nimport { Line, defaults } from \"react-chartjs-2\";\nimport { LeaderboardResponse, Country } from \"../types\";\nimport \"./GlobalStats.css\";\nimport \"chartjs-plugin-annotation\";\nimport { countriesById } from \"../api\";\nimport { backgroundColors } from \"../App\";\n\nexport const MIN_THRESHOLD = 3420000;\nexport const MAX_THRESHOLD = 4170000;\nconst MAX_Y = 4300000;\n\nconst ChartConf = (defaults as any).global;\n\nChartConf.elements.point.backgroundColor = \"rgba(255, 255, 255, 0.8)\";\nChartConf.elements.point.borderColor = \"rgba(255, 255, 255, 0.8)\";\nChartConf.elements.line.borderColor = \"rgba(255, 255, 255, 0.8)\";\nChartConf.legend.labels.fontColor = \"rgba(255, 255, 255, 0.8)\";\n\ntype GlobalStatsProps = {\n  countries: Map<string, Country>;\n  netCO2History: LeaderboardResponse[\"netCO2History\"];\n  goeMillis: number;\n};\n\ntype TimeSeriesByCountry = Map<string, number[]>;\n\nconst GlobalStats = (props: GlobalStatsProps) => {\n  const countryIds = Array.from(props.countries.keys());\n  const [times, setTimes] = useState<Date[]>([]);\n  const [netCO2ByCountry, setNetCO2ByCountry] = useState<TimeSeriesByCountry>(\n    new Map()\n  );\n  const [totalCO2, setTotalCO2] = useState(3000);\n\n  useEffect(() => {\n    const { netCO2History } = props;\n\n    // merge all time series into a single one\n    const allTimeEntries: { [instant: string]: { [id: string]: number } } = {};\n\n    Object.entries(netCO2History).forEach(([id, l]) => {\n      l.forEach(v => {\n        const values = allTimeEntries[v[1]] || {};\n        values[id] = parseInt(v[0], 10);\n        allTimeEntries[v[1]] = values;\n      });\n    });\n\n    const sortedTimeline = Object.keys(allTimeEntries).sort();\n\n    const newTimes = times.reduce(\n      (prev, current) => {\n        prev[(current.getTime() / 1000).toString()] = true;\n        return prev;\n      },\n      {} as { [date: string]: boolean }\n    );\n\n    const newValues = new Map();\n    for (let countryId of props.countries.keys()) {\n      newValues.set(countryId, netCO2ByCountry.get(countryId) || []);\n    }\n\n    // fill \"holes\" for each country\n    sortedTimeline.forEach(t => {\n      newTimes[t] = true;\n      countryIds.forEach(id => {\n        const newValuesForCountry = newValues.get(id) || [];\n        let newValue = allTimeEntries[t][id];\n        if (!newValue) {\n          const [latest] = (\n            (newValuesForCountry.length && newValuesForCountry) || [0]\n          ).slice(-1);\n          newValue = latest;\n        }\n        newValuesForCountry.push(newValue);\n      });\n    });\n\n    const co2 = Array.from(newValues.values()).reduce((prev, current) => {\n      const [latest] = current.slice(-1);\n      return prev + latest;\n    }, 3000);\n\n    setTimes(\n      Object.keys(newTimes)\n        .sort()\n        .map(t => new Date(parseInt(t, 10) * 1000))\n    );\n    setNetCO2ByCountry(newValues);\n    setTotalCO2(co2);\n  }, [props.netCO2History]);\n\n  return (\n    <>\n      <h4>Global emissions</h4>\n      <Row className=\"global-stats\" noGutters>\n        <Col>\n          <Row>\n            <Col>\n              <Line\n                data={{\n                  labels: times,\n                  datasets: Array.from(netCO2ByCountry.entries()).map(\n                    ([countryId, series], i) => ({\n                      label: countriesById[countryId].name,\n                      fill: i === 0 ? \"origin\" : undefined,\n                      data: series,\n                      pointBorderWidth: 0,\n                      backgroundColor: backgroundColors[countryId]\n                    })\n                  )\n                }}\n                options={{\n                  animation: { duration: 0 },\n                  showLine: true,\n                  spanGaps: true,\n                  elements: {\n                    line: { fill: \"-1\" }\n                  },\n                  scales: {\n                    xAxes: [\n                      {\n                        id: \"time-axis\",\n                        type: \"time\",\n                        display: true,\n                        gridLines: {\n                          display: false,\n                          color: \"rgba(255, 255, 255, 0.6)\"\n                        },\n                        ticks: {\n                          source: \"auto\",\n                          beginAtZero: false,\n                          autoSkip: true,\n                          fontColor: \"rgba(255, 255, 255, 0.8)\"\n                        },\n                        scaleLabel: \"rgba(255, 255, 255, 0.8)\",\n                        time: { unit: \"second\", round: \"second\" }\n                      }\n                    ],\n                    yAxes: [\n                      {\n                        id: \"value-axis\",\n                        type: \"linear\",\n                        scaleLabel: \"rgba(255, 255, 255, 0.8)\",\n                        stacked: true,\n                        gridLines: {\n                          color: \"rgba(255, 255, 255, 0.2)\"\n                        },\n                        ticks: {\n                          suggestedMax: MAX_Y,\n                          suggestedMin: 0,\n                          beginAtZero: true,\n                          fontColor: \"rgba(255, 255, 255, 0.8)\"\n                        }\n                      }\n                    ]\n                  },\n                  annotation: {\n                    drawTime: \"afterDraw\",\n                    annotations: [\n                      {\n                        type: \"line\",\n                        mode: \"horizontal\",\n                        scaleID: \"value-axis\",\n                        value: MIN_THRESHOLD,\n                        borderColor: \"rgba(253, 106, 2, 0.7)\",\n                        borderWidth: 2,\n                        label: {\n                          content: \"+1.5°C\",\n                          enabled: true,\n                          backgroundColor: \"rgba(253, 106, 2, 0.8)\"\n                        }\n                      },\n                      {\n                        type: \"line\",\n                        mode: \"horizontal\",\n                        scaleID: \"value-axis\",\n                        value: MAX_THRESHOLD,\n                        borderColor: \"red\",\n                        borderWidth: 1,\n                        label: {\n                          content: \"+2°C\",\n                          enabled: true,\n                          backgroundColor: \"rgba(255, 0, 0, 0.7)\"\n                        }\n                      }\n                    ]\n                  }\n                }}\n                width={300}\n                height={400}\n                redraw\n              />\n            </Col>\n          </Row>\n          <Row className=\"current\">\n            <Col>\n              Current CO₂ levels: <span className=\"bold\">{totalCO2 || 0}</span>{\" \"}\n              Mt\n            </Col>\n          </Row>\n          <Row className=\"goe\">\n            Göllars circulating:{\"  \"}\n            <span className=\"bold\">\n              ₲{numeral(props.goeMillis / 1000).format(\"0.00\")}\n            </span>\n          </Row>\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nexport default React.memo(GlobalStats);\n","import React from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\nimport { Bar } from \"react-chartjs-2\";\nimport \"./Sustainability.css\";\nimport { Country } from \"../types\";\nimport { backgroundColors } from \"../App\";\n\ntype SustainabilityProps = {\n  countries: Map<string, Country>;\n  co2ByCountry: { [countrId: string]: string };\n  treesByCountry: { [countryId: string]: string };\n};\n\nconst Sustainability = (props: SustainabilityProps) => {\n  const { countries, co2ByCountry, treesByCountry } = props;\n  const countryIds = Array.from(countries.keys());\n\n  const labels: string[] = [];\n  const co2: number[] = [];\n  const trees: number[] = [];\n\n  countries.forEach((c, id) => {\n    labels.push(c.shortName);\n    co2.push(parseInt(co2ByCountry[id] || \"0\", 10));\n    trees.push(parseInt(treesByCountry[id] || \"0\", 10));\n  });\n\n  return (\n    <>\n      <h4>CO₂ emitted</h4>\n      <Row className=\"sustainability\" noGutters>\n        <Col>\n          <Bar\n            data={{\n              labels,\n              datasets: [\n                {\n                  label: \"CO₂\",\n                  data: co2,\n                  backgroundColor: countryIds.map(c => backgroundColors[c])\n                }\n              ]\n            }}\n            options={{\n              animation: { duration: 0 },\n              legend: { display: false },\n              scales: {\n                xAxes: [\n                  {\n                    barPercentage: 0.5,\n                    scaleLabel: \"rgba(255, 255, 255, 0.8)\",\n                    gridLines: {\n                      color: \"rgba(255, 255, 255, 0.4)\"\n                    },\n                    ticks: {\n                      fontSize: 16,\n                      fontColor: \"rgba(255, 255, 255, 0.8)\"\n                    }\n                  }\n                ],\n                yAxes: [\n                  {\n                    scaleLabel: \"rgba(255, 255, 255, 0.8)\",\n                    gridLines: {\n                      color: \"rgba(255, 255, 255, 0.2)\"\n                    },\n                    ticks: {\n                      suggestedMin: 500000,\n                      fontColor: \"rgba(255, 255, 255, 0.8)\"\n                    }\n                  }\n                ]\n              }\n            }}\n            width={200}\n            height={120}\n            redraw\n          />\n        </Col>\n      </Row>\n      <h4>Trees planted</h4>\n      <Row className=\"trees\" noGutters>\n        <Col>\n          <Bar\n            data={{\n              labels,\n              datasets: [\n                {\n                  label: \"trees\",\n                  data: trees,\n                  backgroundColor: countryIds.map(c => backgroundColors[c])\n                }\n              ]\n            }}\n            options={{\n              animation: { duration: 0 },\n              legend: { display: false },\n              scales: {\n                xAxes: [\n                  {\n                    barPercentage: 0.5,\n                    scaleLabel: \"rgba(255, 255, 255, 0.8)\",\n                    gridLines: {\n                      color: \"rgba(255, 255, 255, 0.4)\"\n                    },\n                    ticks: {\n                      fontSize: 16,\n                      fontColor: \"rgba(255, 255, 255, 0.8)\"\n                    }\n                  }\n                ],\n                yAxes: [\n                  {\n                    scaleLabel: \"rgba(255, 255, 255, 0.8)\",\n                    gridLines: {\n                      color: \"rgba(255, 255, 255, 0.2)\"\n                    },\n                    ticks: {\n                      suggestedMin: 0,\n                      fontColor: \"rgba(255, 255, 255, 0.8)\"\n                    }\n                  }\n                ]\n              }\n            }}\n            width={200}\n            height={120}\n            redraw\n          />\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nexport default React.memo(Sustainability);\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Col, Container, Row } from \"react-bootstrap\";\nimport { draw } from \"patternomaly\";\nimport ReactPullLoad, { STATS } from \"react-pullload\";\nimport Leaderboard from \"./components/Leaderboard\";\nimport GlobalStats from \"./components/GlobalStats\";\nimport Sustainability from \"./components/Sustainability\";\nimport { useInterval } from \"./effects\";\nimport { getLeaderboard, countriesById } from \"./api\";\nimport { LeaderboardResponse } from \"./types\";\nimport \"./App.css\";\n\nconst POLL_INTERVAL_SECONDS = 15;\n\n// use a Map so that insertion order is used in traversals\nconst countries = new Map(\n  // group countries by event, sort by short name lexicographically\n  Object.entries(countriesById).sort(([_, c1], [__, c2]) =>\n    c1.event > c2.event\n      ? 1\n      : c1.event === c2.event\n      ? c1.shortName > c2.shortName\n        ? 1\n        : c1.shortName === c2.shortName\n        ? 0\n        : -1\n      : -1\n  )\n);\n\nexport const backgroundColors = Array.from(countries.values()).reduce(\n  (prev, current) => {\n    prev[current.id] = current.pattern\n      ? draw(current.pattern as \"dot\" | \"dash\", current.color)\n      : current.color;\n    return prev;\n  },\n  {} as { [countryId: string]: string | CanvasPattern }\n);\n\nconst NoFooter = (props: any) => <div />;\n\nconst App: React.FC = () => {\n  const [players, setPlayers] = useState<LeaderboardResponse[\"players\"]>({});\n  const [trees, setTrees] = useState<LeaderboardResponse[\"trees\"]>([]);\n  const [emissions, setEmissions] = useState<LeaderboardResponse[\"emissions\"]>(\n    []\n  );\n  const [netCO2History, setNetCO2History] = useState(\n    Object.keys(countries).reduce(\n      (prev, current) => {\n        prev[current] = [];\n        return prev;\n      },\n      {} as LeaderboardResponse[\"netCO2History\"]\n    )\n  );\n  const [co2ByCountry, setCO2ByCountry] = useState<\n    LeaderboardResponse[\"co2ByCountry\"]\n  >({});\n  const [treesByCountry, setTreesByCountry] = useState<\n    LeaderboardResponse[\"treesByCountry\"]\n  >({});\n  const [goeMillis, setGoeMillis] = useState(0);\n  const lastPolled = useRef(new Date(\"1984-02-24T15:54:00\"));\n  const [pullLoadAction, setPullLoadAction] = useState(STATS.init);\n  const [hasMore, setHasMore] = useState(false);\n\n  const pollLeaderbord = async () => {\n    const response = await getLeaderboard();\n    if (lastPolled.current) {\n      lastPolled.current.setTime(new Date().valueOf());\n    }\n    if (response) {\n      setPlayers(response.players);\n      setTrees(response.trees);\n      setEmissions(response.emissions);\n      setNetCO2History(response.netCO2History);\n      setCO2ByCountry(response.co2ByCountry);\n      setTreesByCountry(response.treesByCountry);\n      setGoeMillis(response.goeMillisCirculating);\n    }\n  };\n\n  // initialize the leaderboard by polling once right away\n  useEffect(() => {\n    pollLeaderbord();\n    const focusListener = () => {\n      if (document.visibilityState === \"visible\") {\n        if (\n          lastPolled.current &&\n          new Date().valueOf() - lastPolled.current.valueOf() >\n            POLL_INTERVAL_SECONDS * 1000\n        ) {\n          console.log(\n            `polling after getting back focus, lastUpdate was on ${lastPolled}`\n          );\n          pollLeaderbord();\n        }\n      }\n    };\n    document.addEventListener(\"visibilitychange\", focusListener);\n    // unregister focus listener on cleanup\n    return () =>\n      document.removeEventListener(\"visibilitychange\", focusListener);\n  }, []);\n\n  // start polling every POLL_INTERVAL_SECONDS... seconds\n  useInterval(pollLeaderbord, POLL_INTERVAL_SECONDS * 1000);\n\n  const handlePullAction = (action: STATS) => {\n    if (action !== pullLoadAction) {\n      if (action === STATS.refreshing) {\n        const refreshed = () => {\n          setPullLoadAction(STATS.refreshed);\n        };\n        pollLeaderbord()\n          .then(refreshed)\n          .catch(refreshed);\n      } else {\n        setPullLoadAction(action);\n      }\n    }\n  };\n\n  return (\n    <div className=\"app\">\n      <ReactPullLoad\n        downEnough={100}\n        action={pullLoadAction}\n        handleAction={handlePullAction}\n        hasMore={false}\n        FooterNode={NoFooter}\n      >\n        <Container fluid>\n          <Row>\n            <Col>\n              <h1>\n                <span role=\"img\" aria-label=\"globe\">\n                  🌍\n                </span>{\" \"}\n                Planet A{\" \"}\n                <span role=\"img\" aria-label=\"globe\">\n                  🌳\n                </span>\n              </h1>\n            </Col>{\" \"}\n          </Row>\n          <Row>\n            <Col className=\"mainCol\" sm={12} lg={6} xl={4}>\n              <Leaderboard\n                countries={countries}\n                players={players}\n                trees={trees}\n                emissions={emissions}\n              />\n            </Col>\n            <Col className=\"mainCol\" sm={12} lg={6} xl={4}>\n              <GlobalStats\n                countries={countries}\n                netCO2History={netCO2History}\n                goeMillis={goeMillis}\n              />\n            </Col>\n            <Col className=\"mainCol\" sm={12} lg={6} xl={4}>\n              <Sustainability\n                countries={countries}\n                co2ByCountry={co2ByCountry}\n                treesByCountry={treesByCountry}\n              />\n            </Col>\n          </Row>\n        </Container>\n      </ReactPullLoad>\n    </div>\n  );\n};\n\nexport default App;\n","import { useEffect, useRef } from \"react\";\n\ntype Callback = () => any;\n\n// from https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nexport const useInterval = (callback: Callback, delay: number) => {\n  const savedCallback = useRef<Callback>();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current!();\n    }\n    if (delay !== null) {\n      const id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}