(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),c=a(7),l=a.n(c),s=(a(82),a(14)),i=a.n(s),u=a(23),m=a(6),b=a(216),d=a(212),f=a(213),g=a(69),p=a(217),h=a(214),y=a(215),E=(a(84),a(33)),v=a.n(E),C={name:"Mr. Mysterious",event:"???"},O=function(e){var t=e.countries,a=e.player,r=e.balance;return o.a.createElement(d.a,{noGutters:!0},o.a.createElement(f.a,{xs:10,className:"player-name"},o.a.createElement(p.a,{key:a.name,placement:"right",overlay:o.a.createElement(h.a,{id:"tt-".concat(a.name)},(t.get(a.countryId)||{name:"unknown country"}).name)},o.a.createElement(y.a,{pill:!0,style:{backgroundColor:(t.get(a.countryId)||{color:"white"}).color,color:"#eee"}},"".concat((t.get(a.countryId)||{event:"ext"}).event,"-").concat((t.get(a.countryId)||{shortName:"xxx"}).shortName.toLowerCase())))," ".concat(a.name||"Mr. Anonymous")),o.a.createElement(f.a,null,v()(r).format("0a")))},j=o.a.memo(function(e){return o.a.createElement("div",{className:"leaderboard"},o.a.createElement("h4",null,"Best planters - CO\u2082 locked"),o.a.createElement(d.a,{className:"tree-huggers",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(d.a,{className:"headers",noGutters:!0},o.a.createElement(f.a,{xs:10},"name"),o.a.createElement(f.a,null,"CO\u2082 (Mt)")),e.trees.slice(0,10).map(function(t){return o.a.createElement(O,{key:t[0],countries:e.countries,player:e.players[t[0]]||C,balance:parseInt(t[1],10)})}))),o.a.createElement("h4",null,"Biggest polluters - CO\u2082 emitted"),o.a.createElement(d.a,{className:"polluters",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(d.a,{className:"headers",noGutters:!0},o.a.createElement(f.a,{xs:10},"name"),o.a.createElement(f.a,null,"CO\u2082 (Mt)")),e.emissions.slice(0,10).map(function(t){return o.a.createElement(O,{key:t[0],countries:e.countries,player:e.players[t[0]]||C,balance:parseInt(t[1],10)})}))))}),w=a(19),x=(a(200),a(201),a(76)),k=x,N={Accept:"application/json","Content-Type":"application/json"},A=function(){var e=Object(u.a)(i.a.mark(function e(t){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(200!==(a=e.sent).status){e.next=8;break}return e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",void 0);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(function(){return e="/stats".concat(r?"?from=".concat(r):""),fetch("".concat("https://planet-a-backend.before.coffee").concat(e),{method:"GET",headers:N});var e});case 2:return(t=e.sent)&&(r=t.lastUpdate),e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),S=w.c.global;S.elements.point.backgroundColor="rgba(255, 255, 255, 0.8)",S.elements.point.borderColor="rgba(255, 255, 255, 0.8)",S.elements.line.borderColor="rgba(255, 255, 255, 0.8)",S.elements.line.borderColor="rgba(255, 255, 255, 0.8)",S.legend.labels.fontColor="rgba(255, 255, 255, 0.8)";var I=o.a.memo(function(e){var t=Array.from(e.countries.keys()),a=Object(n.useState)([]),r=Object(m.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)(new Map),i=Object(m.a)(s,2),u=i[0],b=i[1],g=Object(n.useState)(3e3),p=Object(m.a)(g,2),h=p[0],y=p[1];return Object(n.useEffect)(function(){var a=e.netCO2History,r={};Object.entries(a).forEach(function(e){var t=Object(m.a)(e,2),a=t[0];t[1].forEach(function(e){var t=r[e[1]]||{};t[a]=parseInt(e[0],10),r[e[1]]=t})});var n=Object.keys(r).sort(),o=c.reduce(function(e,t){return e[(t.getTime()/1e3).toString()]=!0,e},{}),s=new Map,i=!0,d=!1,f=void 0;try{for(var g,p=e.countries.keys()[Symbol.iterator]();!(i=(g=p.next()).done);i=!0){var h=g.value;s.set(h,u.get(h)||[])}}catch(v){d=!0,f=v}finally{try{i||null==p.return||p.return()}finally{if(d)throw f}}n.forEach(function(e){o[e]=!0,t.forEach(function(t){var a=s.get(t)||[],n=r[e][t];if(!n){var o=(a.length&&a||[0]).slice(-1);n=Object(m.a)(o,1)[0]}a.push(n)})});var E=Array.from(s.values()).reduce(function(e,t){var a=t.slice(-1);return e+Object(m.a)(a,1)[0]},3e3);l(Object.keys(o).sort().map(function(e){return new Date(1e3*parseInt(e,10))})),b(s),y(E)},[e.netCO2History]),o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",null,"Global emissions"),o.a.createElement(d.a,{className:"global-stats",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(d.a,null,o.a.createElement(f.a,null,o.a.createElement(w.b,{data:{labels:c,datasets:Array.from(u.entries()).map(function(e){var t=Object(m.a)(e,2),a=t[0],r=t[1];return{label:k[a].name,data:r,pointBorderWidth:0,backgroundColor:B[a]}})},options:{animation:{duration:0},showLine:!0,spanGaps:!0,scales:{xAxes:[{id:"time-axis",type:"time",display:!0,gridLines:{display:!1,color:"rgba(255, 255, 255, 0.6)"},ticks:{source:"auto",beginAtZero:!1,autoSkip:!0,fontColor:"rgba(255, 255, 255, 0.8)"},scaleLabel:"rgba(255, 255, 255, 0.8)",time:{unit:"second",round:"second"}}],yAxes:[{id:"value-axis",type:"linear",scaleLabel:"rgba(255, 255, 255, 0.8)",stacked:!0,gridLines:{color:"rgba(255, 255, 255, 0.2)"},ticks:{suggestedMax:43e5,suggestedMin:0,beginAtZero:!0,fontColor:"rgba(255, 255, 255, 0.8)"}}]},annotation:{drawTime:"afterDraw",annotations:[{type:"line",mode:"horizontal",scaleID:"value-axis",value:342e4,borderColor:"rgba(253, 106, 2, 0.3)",borderWidth:2,label:{content:"+1.5\xb0C",enabled:!0,backgroundColor:"rgba(253, 106, 2, 0.7)"}},{type:"line",mode:"horizontal",scaleID:"value-axis",value:417e4,borderColor:"red",borderWidth:1,label:{content:"+2\xb0C",enabled:!0,backgroundColor:"rgba(255, 0, 0, 0.7)"}}]}},width:300,height:400,redraw:!0}))),o.a.createElement(d.a,{className:"current"},o.a.createElement(f.a,null,"Current CO\u2082 levels: ",o.a.createElement("span",{className:"bold"},h||0)," ","Mt")),o.a.createElement(d.a,{className:"goe"},"G\xf6llars circulating:","  ",o.a.createElement("span",{className:"bold"},"\u20b2",v()(e.goeMillis/1e3).format("0.00"))))))}),L=(a(207),o.a.memo(function(e){var t=e.countries,a=e.co2ByCountry,r=e.treesByCountry,n=Array.from(t.keys()),c=[],l=[],s=[];return t.forEach(function(e,t){c.push(e.shortName),l.push(parseInt(a[t]||"0",10)),s.push(parseInt(r[t]||"0",10))}),o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",null,"CO\u2082 emitted"),o.a.createElement(d.a,{className:"sustainability",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(w.a,{data:{labels:c,datasets:[{label:"CO\u2082",data:l,backgroundColor:n.map(function(e){return B[e]})}]},options:{animation:{duration:0},legend:{display:!1},scales:{xAxes:[{barPercentage:.5,scaleLabel:"rgba(255, 255, 255, 0.8)",gridLines:{color:"rgba(255, 255, 255, 0.4)"},ticks:{fontSize:16,fontColor:"rgba(255, 255, 255, 0.8)"}}],yAxes:[{scaleLabel:"rgba(255, 255, 255, 0.8)",gridLines:{color:"rgba(255, 255, 255, 0.2)"},ticks:{suggestedMin:0,fontColor:"rgba(255, 255, 255, 0.8)"}}]}},width:200,height:120,redraw:!0}))),o.a.createElement("h4",null,"Trees planted"),o.a.createElement(d.a,{className:"trees",noGutters:!0},o.a.createElement(f.a,null,o.a.createElement(w.a,{data:{labels:c,datasets:[{label:"trees",data:s,backgroundColor:n.map(function(e){return B[e]})}]},options:{animation:{duration:0},legend:{display:!1},scales:{xAxes:[{barPercentage:.5,scaleLabel:"rgba(255, 255, 255, 0.8)",gridLines:{color:"rgba(255, 255, 255, 0.4)"},ticks:{fontSize:16,fontColor:"rgba(255, 255, 255, 0.8)"}}],yAxes:[{scaleLabel:"rgba(255, 255, 255, 0.8)",gridLines:{color:"rgba(255, 255, 255, 0.2)"},ticks:{suggestedMin:0,fontColor:"rgba(255, 255, 255, 0.8)"}}]}},width:200,height:120,redraw:!0}))))})),G=(a(208),new Map(Object.entries(k).sort(function(e,t){var a=Object(m.a)(e,2),r=(a[0],a[1]),n=Object(m.a)(t,2),o=(n[0],n[1]);return r.event>o.event?1:r.event===o.event?r.shortName>o.shortName?1:r.shortName===o.shortName?0:-1:-1}))),B=Array.from(G.values()).reduce(function(e,t){return e[t.id]=t.pattern?Object(g.draw)(t.pattern,t.color):t.color,e},{}),D=function(){var e=Object(n.useState)({}),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),l=Object(m.a)(c,2),s=l[0],g=l[1],p=Object(n.useState)([]),h=Object(m.a)(p,2),y=h[0],E=h[1],v=Object(n.useState)(Object.keys(G).reduce(function(e,t){return e[t]=[],e},{})),C=Object(m.a)(v,2),O=C[0],w=C[1],x=Object(n.useState)({}),k=Object(m.a)(x,2),N=k[0],A=k[1],S=Object(n.useState)({}),B=Object(m.a)(S,2),D=B[0],T=B[1],H=Object(n.useState)(0),P=Object(m.a)(H,2),W=P[0],z=P[1],R=function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:(t=e.sent)&&(r(t.players),g(t.trees),E(t.emissions),w(t.netCO2History),A(t.co2ByCountry),T(t.treesByCountry),z(t.goeMillisCirculating));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){R()},[]),function(e,t){var a=Object(n.useRef)();Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}(R,15e3),o.a.createElement(b.a,{className:"app",fluid:!0},o.a.createElement(d.a,null,o.a.createElement(f.a,null,o.a.createElement("h1",null,o.a.createElement("span",{role:"img","aria-label":"globe"},"\ud83c\udf0d")," ","Planet A"," ",o.a.createElement("span",{role:"img","aria-label":"globe"},"\ud83c\udf33")))," "),o.a.createElement(d.a,null,o.a.createElement(f.a,{className:"mainCol"},o.a.createElement(j,{countries:G,players:a,trees:s,emissions:y})),o.a.createElement(f.a,{className:"mainCol"},o.a.createElement(I,{countries:G,netCO2History:O,goeMillis:W})),o.a.createElement(f.a,{className:"mainCol"},o.a.createElement(L,{countries:G,co2ByCountry:N,treesByCountry:D}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e){e.exports={49160:{id:"49160",name:"Pollutistan",shortName:"PLAN",color:"rgba(0, 0, 255, 0.5)",textColor:"#000065",event:"eth2"},49161:{id:"49161",name:"New Smogland",shortName:"SMOG",color:"rgba(154, 186, 0, 0.6)",textColor:"#5b7500",event:"ccc"},49162:{id:"49162",name:"Democratic Repulic of Deforestation",shortName:"DRED",color:"rgba(255, 198, 0, 0.55)",textColor:"#9d6d1d",pattern:"dot",event:"ccc"},49163:{id:"49163",name:"Cataclysmia",shortName:"CASM",color:"rgba(1, 118, 187, 0.45)",pattern:"dash",textColor:"#01436c",event:"ccc"},49164:{id:"49164",name:"Tornayda",shortName:"TORN",color:"rgba(255, 210, 0, 0.6)",textColor:"#876224",event:"eth2"},49165:{id:"49165",name:"Kingdom of Heatwave",shortName:"HEAT",color:"rgba(255, 0, 0, 0.5)",textColor:"#750000",event:"eth2"}}},77:function(e,t,a){e.exports=a(209)},82:function(e,t,a){},84:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.4840b257.chunk.js.map